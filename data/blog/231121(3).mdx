---
title: 'μ‚¬μ©μμ μ •λ³΄λ¥Ό λ°›μ„ λ–„, μ•”νΈν™”λ¥Ό μ–΄λμ •λ„κΉμ§€ ν•΄μ•Όλ§ ν•λ”κ°€?'
date: '2023-11-21'
tags: ['Backend, Frontend']
draft: false
summary: 'μ–΄λ””κΉμ§€ μ•”νΈν™”λ¥Ό ν•΄μ•Ό λ²•μ μΌλ΅ μ±…μ„μ΄ μ—†μ„κΉ?'
images: []
---

π¦΅ μ‘μ„±μ : μ›μ¤€

### μ‚¬μ©μμ μ •λ³΄λ¥Ό λ°›λ‹¤ λ³΄λ©΄ κ°μΈ μ •λ³΄λ¥Ό λ°›λ” κ²½μ°κ°€ μƒκΈΈ μ μλ‹¤.

κ·Έλ ‡λ‹¤λ©΄ μ–΄λ””κΉμ§€ μ•”νΈν™”λ¥Ό ν•΄μ•Ό λ²•μ μΌλ΅ μ±…μ„μ΄ μ—†μ„κΉ?

![](https://efficacious-camel-96c.notion.site/image/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2F5eda31ee-1593-4ecf-bfad-bae333b90117%2F1273f553-7fb8-430f-9e56-14c2c15a7ac6%2FUntitled.png?table=block&id=6e130515-c38b-4c36-8161-8349d3fb3298&spaceId=5eda31ee-1593-4ecf-bfad-bae333b90117&width=1420&userId=&cache=v2)

### μ°λ¦¬λ” λ¬΄μ—‡μ„ μ•”νΈν™” ν•΄μ•Όν•λ‚

1. **μ£Όλ―Όλ“±λ΅λ²νΈ**
2. **κ³„μΆλ²νΈ**

μ°λ¦¬μ κ²½μ° μ„μ™€ κ°™μ΄ λ‘κ°€μ§€ μ •λ³΄λ¥Ό μ•”νΈν™” μ²λ¦¬ν•΄μ•Ό ν•  ν•„μ”κ°€ μλ‹¤.

(λΉ„λ°€λ²νΈ, λ°”μ΄μ¤ μ •λ³΄, μ—¬κ¶λ²νΈ λ“±λ“± λ‹¤μ–‘ν• μ”μ†μ— λ€ν•΄ μ•”νΈν™”κ°€ ν•„μμ§€λ§ μ°λ¦¬λ” μ—†λ‹¤~)

**μ„ μ •λ³΄λ“¤μ€ μ•”νΈν™” ν•μ§€ μ•μΌλ©΄ λ²•μ μΌλ΅ μ μ λ¥Ό λ°›μ„ μ μλ‹¤.**

---

## μ‚¬μ©ν•  μ•”νΈν™” μ•κ³ λ¦¬μ¦ AesBytesEncryptor (μ–‘λ°©ν–¥ μ•”νΈν™”)

SpringSecurityμ—μ„ μ κ³µν•΄μ£Όλ” μ–‘λ°©ν–¥ μ•”νΈν™”μΈ `AesBytesEncryptor` μ‚¬μ©ν•κ³ μ ν•λ‹¤.

ν”ν λΉ„λ°€λ²νΈ μ €μ¥ν•  λ• μ‚¬μ©ν•λ `BCryptPasswordEncoder` μ κ²½μ° ν•΄μ‹ ν•¨μλ¥Ό μ‚¬μ©ν•μ—¬ μ•”νΈν™”ν•λ”λ°, μ΄λ” λ‹¨λ°©ν–¥ μ•”νΈν™” μ•κ³ λ¦¬μ¦μΌλ΅ λ³µνΈν™”κ°€ λ¶κ°€λ¥ν•κΈ° λ•λ¬Έμ— λ§¤μΉ μ—¬λ¶€λ¥Ό ν™•μΈν•λ” λΉ„λ°€λ²νΈκ°€ μ•„λ‹ μ΅°νλ¥Ό ν•΄μ•Όν•λ” μ£Όλ―Όλ²νΈ, κ³„μΆλ²νΈμ κ²½μ°λ” λ‹¤λ¥Έ μ•”νΈν™” λ°©μ‹μ„ μ‚¬μ©ν•  κ²ƒμ΄λ‹¤.

`AesBytesEncryptor` λ” λ€μΉ­ν‚¤ μ•κ³ λ¦¬μ¦μ„ ν†µν•΄ μ•”νΈν™” ν•κΈ° λ•λ¬Έμ—, μ°λ¦¬μ `application.yml` μ— ν‚¤λ¥Ό μ €μ¥ν•κ³  ν•΄λ‹Ή ν‚¤λ¥Ό ν†µν•΄μ„ μ•”νΈν™”, λ³µνΈν™”λ¥Ό μ§„ν–‰ν•  μμ •μ΄λ‹¤.

### μ„¤μ • λ° κµ¬ν„

```java
@Configuration
@EnableWebSecurity
@RequiredArgsConstructor
public class SecurityConfig {
	  ...

		@Value("${aesBytesEncryptor.secret}")
    private String secretKey;
    @Value("${aesBytesEncryptor.salt}")
    private String salt;

    @Bean
    public AesBytesEncryptor aesBytesEncryptor() {
        return new AesBytesEncryptor(secretKey, salt);
    }

    @Bean
    protected SecurityFilterChain config(HttpSecurity http) throws Exception {
		     ...
		}
}
```

μ΄λ ‡κ² `AesBytesEncryptor` λ¥Ό BeanμΌλ΅ λ“±λ΅ν•΄μ£Όκ³ 

```java
@Component
@RequiredArgsConstructor
public class EncryptorUtils {
    private final AesBytesEncryptor encryptor;

    public String encryptData(String data) {
        byte[] encrypt = encryptor.encrypt(data.getBytes(UTF_8));
        return byteArrayToString(encrypt);
    }

    public String decryptData(String data) {
        byte[] decryptBytes = stringToByteArray(data);
        byte[] decrypt = encryptor.decrypt(decryptBytes);
        return new String(decrypt, UTF_8);
    }

    public String byteArrayToString(byte[] bytes) {
        StringBuilder sb = new StringBuilder();
        for (byte abyte : bytes) {
            sb.append(abyte);
            sb.append(" ");
        }
        return sb.toString();
    }

    public byte[] stringToByteArray(String byteString) {
        String[] split = byteString.split("\\s");
        ByteBuffer buffer = ByteBuffer.allocate(split.length);
        for (String s : split) {
            buffer.put((byte) Integer.parseInt(s));
        }
        return buffer.array();
    }
}
```

μΈμ½”λ”©κ³Ό λ””μ½”λ”©μ„ κ°κ° μν–‰ν•  μ μκ² ν•΄μ¤€λ‹¤.

λ‹¤λ§, μΈμ½”λ”© κ²°κ³Όκ°€ byteλ΅ λ‚μ¤κΈ° λ•λ¬Έμ— μ΄λ¥Ό DBμ— μ €μ¥ν•κΈ° μ„ν•΄μ„λ” StringμΌλ΅ λ³€κ²½ν•΄μ¤μ•Ό ν•λ‹¤.

κ·Έλ¦¬κ³ , λ§μ°¬κ°€μ§€λ΅ μ½μ–΄μ™€μ„ byteλ¥Ό μ¤νΈλ§μΌλ΅ λ³€κ²½ν•΄μ£Όκ³  μ΄λ¥Ό μ¤νΈλ§μΌλ΅ λ³€κ²½ν•΄μ„ λ³΄μ—¬μ£Όλ©΄ λλ‹¤.

### κ²°κ³Ό

![](https://efficacious-camel-96c.notion.site/image/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2F5eda31ee-1593-4ecf-bfad-bae333b90117%2Ffada357f-a551-427d-be8d-a6e4ad82f279%2FUntitled.png?table=block&id=b0a630e8-7173-445a-8a3a-521ad3915d70&spaceId=5eda31ee-1593-4ecf-bfad-bae333b90117&width=1420&userId=&cache=v2)

![](https://efficacious-camel-96c.notion.site/image/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2F5eda31ee-1593-4ecf-bfad-bae333b90117%2F861216d1-4246-40ea-8090-427a00ef98ff%2FUntitled.png?table=block&id=33dedca9-c2a8-4928-89c8-62eb8eb3fe18&spaceId=5eda31ee-1593-4ecf-bfad-bae333b90117&width=1420&userId=&cache=v2)

```json
{
  "accountNumber": "123123",
  "bank": "μ‹ ν•",
  "accountHolder": "μ–‘μ°λ„μ¤€",
  "name": "μ–‘μ›μ¤€",
  "rrn": "123123123"
}
```

μ΄λ ‡κ² μ”μ²­μ„ ν•΄μ„ μ €μ¥μ„ ν•λ©΄, μ„μ™€ κ°™μ΄ `accountNumber` μ™€ `rrn` μ΄ μ•”νΈν™” μ²λ¦¬λμ–΄μ„ μ €μ¥λλ” κ²ƒμ„ ν™•μΈν•  μ μλ‹¤.

λ¬Όλ΅ , μ΄λ” μ„μ `decryptData(String data)` λ©”μ†λ“λ¥Ό μ‚¬μ©ν•λ©΄ 123123, 123123123 μΌλ΅ λ³µνΈν™” λμ–΄μ„ λ³΄μ—¬μ§„λ‹¤.
