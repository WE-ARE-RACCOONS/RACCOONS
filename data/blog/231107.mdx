---
title: 'Context APIë€'
date: '2023-11-07'
tags: ['Frontend']
draft: false
summary: 'Reactì—ì„œ ë‹¨ê³„ë§ˆë‹¤ ì¼ì¼ì´ propsë¥¼ ë„˜ê²¨ì£¼ì§€ ì•Šê³ ë„, ì»´í¬ë„ŒíŠ¸ íŠ¸ë¦¬ ì „ì²´ì— ë°ì´í„°ë¥¼ ì œê³µí•  ìˆ˜ ìˆê²Œë” í•˜ëŠ” ë„êµ¬ì¸ Context API'
images: []
---

ğŸ¦¡ ì‘ì„±ì : í˜œì›

### âœ¨ Context ë€?

ğŸ’¡ Reactì—ì„œ ë‹¨ê³„ë§ˆë‹¤ ì¼ì¼ì´ propsë¥¼ ë„˜ê²¨ì£¼ì§€ ì•Šê³ ë„, ì»´í¬ë„ŒíŠ¸ íŠ¸ë¦¬ ì „ì²´ì— ë°ì´í„°ë¥¼ ì œê³µí•  ìˆ˜ ìˆê²Œë” í•˜ëŠ” ë„êµ¬ë¥¼ ë§í•œë‹¤.

ì¼ë°˜ì ì¸ React ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ, ë°ì´í„°ëŠ” ìœ„ì—ì„œ ì•„ë˜ë¡œ(ì¦‰, ë¶€ëª¨ â†’ ìì‹) propsë¥¼ í†µí•´ ì „ë‹¬ë¨  
í•˜ì§€ë§Œ ì• í”Œë¦¬ì¼€ì´ì…˜ ì•ˆì˜ ì—¬ëŸ¬ ì»´í¬ë„ŒíŠ¸ì— ì „í•´ì¤˜ì•¼ í•˜ëŠ” propsì˜ ê²½ìš° ì´ ê³¼ì •ì´ ë²ˆê±°ë¡œìš¸ ìˆ˜ ìˆë‹¤.  
â†’ Contextë¥¼ ì´ìš©í•˜ë©´ ì´ ë¬¸ì œë¥¼ í•´ê²°í•  ìˆ˜ ìˆìŒ

### âœ¨ ì–¸ì œ Contextë¥¼ ì¨ì•¼ í• ê¹Œ

ContextëŠ” React ì»´í¬ë„ŒíŠ¸ íŠ¸ë¦¬ ì•ˆì—ì„œ ì „ì—­ì (global)ì¸ ë°ì´í„°ë¥¼ ê³µìœ í•  ìˆ˜ ìˆë„ë¡ ê³ ì•ˆëœ ë°©ë²•  
ex í˜„ì¬ ë¡œê·¸ì¸í•œ ìœ ì €, í…Œë§ˆ, ì„ í˜¸í•˜ëŠ” ì–¸ì–´...

```tsx
class App extends React.Component {
  render() {
    return <Toolbar theme="dark" />
  }
}

function Toolbar(props) {
  return (
    <div>
      <ThemedButton theme={props.theme} />
    </div>
  )
}

class ThemedButton extends React.Component {
  render() {
    return <Button theme={this.props.theme} />
  }
}
```

ì´ ì½”ë“œì—ì„œ ì‚¬ì‹¤ theme ìƒ‰ê¹”ì´ í•„ìš”í•œ ì»´í¬ë„ŒíŠ¸ëŠ” ThemedButtonì¸ë°,
ToolbarëŠ” ì˜¤ë¡œì§€ ThemedButtonì—ê²Œ themeì„ ì „ë‹¬í•´ ì£¼ê¸° ìœ„í•´ Appì—ì„œ themeì„ ë°›ëŠ”ë‹¤.
ToolbarëŠ” ìŠ¤ìŠ¤ë¡œ themeì„ ì‚¬ìš©í•˜ì§€ ì•Šìœ¼ë¯€ë¡œ ë¶ˆí•„ìš”í•œ ì „ë‹¬ì´ ë°œìƒí•˜ëŠ” ê²ƒ.

Contextë¥¼ ì´ìš©í•´ ì´ë¥¼ í•´ê²°í•  ìˆ˜ ìˆë‹¤.

### âœ¨ Context ì‚¬ìš© ì˜ˆì‹œ

```tsx
const ThemeContext = React.createContext('light')

class App extends React.Component {
  render() {
    return (
      <ThemeContext.Provider value="dark">
        <Toolbar />
      </ThemeContext.Provider>
    )
  }
}

function Toolbar() {
  return (
    <div>
      <ThemedButton />
    </div>
  )
}

class ThemedButton extends React.Component {
  static contextType = ThemeContext
  render() {
    return <Button theme={this.context} />
  }
}
```

React.createContext('light')ë¡œ ê¸°ë³¸ê°’ì´ 'light'ì¸ ThemeContextë¥¼ ìƒì„±.
ThemeContext.Providerë¥¼ ì‚¬ìš©í•˜ì—¬ í•˜ìœ„ íŠ¸ë¦¬ ì „ì²´ì— dark í…Œë§ˆ ê°’ì„ ì „ë‹¬.
ThemedButtonì€ contextTypeìœ¼ë¡œ ThemeContextë¥¼ ì§€ì •í•´ í˜„ì¬ theme ê°’ì„ this.contextë¡œ ì½ìŒ.
ì´ì œ ì¤‘ê°„ Toolbar ì»´í¬ë„ŒíŠ¸ëŠ” theme ì „ë‹¬ì„ ìœ„í•œ propsê°€ í•„ìš” ì—†ì–´ì§.

### âœ¨ Context ì‚¬ìš© ì‹œ ì£¼ì˜ì‚¬í•­

Contextì˜ ì£¼ëœ ìš©ë„ëŠ” ì—¬ëŸ¬ ë ˆë²¨ì˜ ì»´í¬ë„ŒíŠ¸ì— ë°ì´í„°ë¥¼ ì „ë‹¬í•˜ëŠ” ê²ƒ.
í•˜ì§€ë§Œ, context ì‚¬ìš© ì‹œ ì»´í¬ë„ŒíŠ¸ ì¬ì‚¬ìš©ì´ ì–´ë ¤ì›Œì§ˆ ìˆ˜ ìˆìœ¼ë¯€ë¡œ ê¼­ í•„ìš”í•  ë•Œë§Œ ì‚¬ìš©í•˜ì.

props ì „ë‹¬ì´ ë³µì¡í•œ ìƒí™©ì—ì„œëŠ” contextë³´ë‹¤ ì»´í¬ë„ŒíŠ¸ í•©ì„±ì„ í™œìš©í•˜ëŠ” ê²ƒì´ ë” ë‹¨ìˆœí•  ìˆ˜ ìˆìŒ.

```tsx
<Page user={user} avatarSize={avatarSize} />
// ... ê·¸ ì•„ë˜ì— ...
<PageLayout user={user} avatarSize={avatarSize} />
// ... ê·¸ ì•„ë˜ì— ...
<NavigationBar user={user} avatarSize={avatarSize} />
// ... ê·¸ ì•„ë˜ì— ...
<Link href={user.permalink}>
  <Avatar user={user} size={avatarSize} />
</Link>
```

ì´ ê²½ìš° ì—¬ëŸ¬ ë‹¨ê³„ì— ê±¸ì³ userì™€ avatarSizeë¥¼ ì „ë‹¬í•˜ëŠ” ëŒ€ì‹ , ì»´í¬ë„ŒíŠ¸ë¥¼ í†µì§¸ë¡œ ì „ë‹¬í•˜ëŠ” ë°©ë²•ìœ¼ë¡œ í•´ê²°í•  ìˆ˜ ìˆìŒ.

### âœ¨ Context ê´€ë ¨ API

React.createContext

```tsx
const MyContext = React.createContext(defaultValue)
```

Context ê°ì²´ë¥¼ ìƒì„±í•˜ê³ , êµ¬ë… ì»´í¬ë„ŒíŠ¸ì— ê¸°ë³¸ê°’ì„ ì„¤ì •í•œë‹¤.
íŠ¸ë¦¬ì—ì„œ ì ì ˆí•œ Providerë¥¼ ì°¾ì§€ ëª»í•  ë•Œë§Œ ê¸°ë³¸ê°’ì„ ì‚¬ìš©í•˜ë©°, Providerê°€ undefinedë¥¼ ì „ë‹¬í•´ë„ ê¸°ë³¸ê°’ì´ ì•„ë‹Œ undefinedë¥¼ ì½ê²Œ ëœë‹¤.

Context.Provider

```tsx
<MyContext.Provider value={/* ì–´ë–¤ ê°’ */}>
```

ProviderëŠ” value propì„ ë°›ì•„ ì´ë¥¼ í•˜ìœ„ ì»´í¬ë„ŒíŠ¸ì— ì „ë‹¬í•œë‹¤.
ì»´í¬ë„ŒíŠ¸ íŠ¸ë¦¬ì—ì„œ ê°€ì¥ ê°€ê¹Œìš´ Providerì˜ ê°’ì„ ì‚¬ìš©í•˜ë©°, valueê°€ ë³€ê²½ë  ë•Œë§ˆë‹¤ ëª¨ë“  êµ¬ë… ì»´í¬ë„ŒíŠ¸ê°€ ë‹¤ì‹œ ë Œë”ë§ëœë‹¤.

Class.contextType
í´ë˜ìŠ¤ ì»´í¬ë„ŒíŠ¸ì—ì„œ contextë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•´ contextType í”„ë¡œí¼í‹°ë¥¼ ì§€ì •í•  ìˆ˜ ìˆìŒ.

```tsx
class MyClass extends React.Component {
  static contextType = MyContext
  render() {
    let value = this.context
    /* context ê°’ì„ ì´ìš©í•œ ë Œë”ë§ */
  }
}
```

Context.Consumer
í•¨ìˆ˜í˜• ì»´í¬ë„ŒíŠ¸ì—ì„œ context êµ¬ë…ì„ ìœ„í•´ Consumerë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤

```tsx
<MyContext.Consumer>
  {value => /* context ê°’ì„ ì´ìš©í•œ ë Œë”ë§ */}
</MyContext.Consumer>
Consumerì˜ ìì‹ì€ ë°˜ë“œì‹œ í•¨ìˆ˜ì—¬ì•¼ í•˜ë©°, í˜„ì¬ context ê°’ì„ ë°›ëŠ”ë‹¤.

Context.displayName
```

```tsx
const MyContext = React.createContext(/* some value */)
MyContext.displayName = 'MyDisplayName'
```

React ê°œë°œì ë„êµ¬ì—ì„œ í‘œì‹œë  context ì´ë¦„ì„ ì„¤ì •í•  ìˆ˜ ìˆë‹¤.

### Contextë¥¼ ì´ìš©í•œ ë‹¤ì–‘í•œ ì˜ˆì‹œ

ê°’ì´ ë³€í•˜ëŠ” context
theme-context.js

```ts
export const themes = {
  light: {
    foreground: '#000000',
    background: '#eeeeee',
  },
  dark: {
    foreground: '#ffffff',
    background: '#222222',
  },
}

export const ThemeContext = React.createContext(themes.dark)
```

```ts
import { ThemeContext } from './theme-context'

class ThemedButton extends React.Component {
  render() {
    let props = this.props;
    let theme = this.context;
    return (
      <button {...props} style={{ backgroundColor: theme.background }} />
    );
  }
}
ThemedButton.contextType = ThemeContext;

export default ThemedButton;
```

```tsx
import { ThemeContext, themes } from './theme-context'
import ThemedButton from './themed-button'

function Toolbar(props) {
  return <ThemedButton onClick={props.changeTheme}>Change Theme</ThemedButton>
}

class App extends React.Component {
  constructor(props) {
    super(props)
    this.state = {
      theme: themes.light,
    }

    this.toggleTheme = () => {
      this.setState((state) => ({
        theme: state.theme === themes.dark ? themes.light : themes.dark,
      }))
    }
  }

  render() {
    return (
      <ThemeContext.Provider value={this.state.theme}>
        <Toolbar changeTheme={this.toggleTheme} />
        <ThemedButton />
      </ThemeContext.Provider>
    )
  }
}

const root = ReactDOM.createRoot(document.getElementById('root'))
root.render(<App />)
```

Provider ì•ˆì— ìˆëŠ” ThemedButtonì€ stateì—ì„œ theme ê°’ì„ ì½ìœ¼ë©°, Provider ë°–ì˜ ThemedButtonì€ ê¸°ë³¸ê°’ ì‚¬ìš©.

### âœ¨ ì—¬ëŸ¬ context êµ¬ë…í•˜ê¸°

Contextë§ˆë‹¤ Consumerë¥¼ ê°œë³„ ë…¸ë“œë¡œ ìƒì„±í•˜ì—¬, context ë³€í™”ë¥¼ ìœ„í•œ ì¬ë Œë”ë§ì´ ìµœì í™”ë˜ë„ë¡ í•¨.

```tsx
const ThemeContext = React.createContext('light')
const UserContext = React.createContext({ name: 'Guest' })

function Content() {
  return (
    <ThemeContext.Consumer>
      {(theme) => (
        <UserContext.Consumer>
          {(user) => <ProfilePage user={user} theme={theme} />}
        </UserContext.Consumer>
      )}
    </ThemeContext.Consumer>
  )
}
```

Content ì»´í¬ë„ŒíŠ¸ëŠ” ThemeContextì™€ UserContextë¥¼ ëª¨ë‘ êµ¬ë…í•œë‹¤.

### âœ¨ ì£¼ì˜ì‚¬í•­

Providerì˜ valueê°€ ê°ì²´ì¼ ê²½ìš° ìƒˆë¡œìš´ ê°ì²´ê°€ ìƒì„±ë˜ë©° í•˜ìœ„ ì»´í¬ë„ŒíŠ¸ê°€ ëª¨ë‘ ë‹¤ì‹œ ë Œë”ë§ë  ìˆ˜ ìˆë‹¤.
ì´ë¥¼ ë°©ì§€í•˜ë ¤ë©´ value ê°’ì„ ë¶€ëª¨ stateì— ì €ì¥í•˜ì—¬ ê´€ë¦¬í•˜ëŠ” ê²ƒì´ ì¢‹ë‹¤.

```tsx
class App extends React.Component {
  constructor(props) {
    super(props)
    this.state = {
      value: { something: 'something' },
    }
  }

  render() {
    return (
      <MyContext.Provider value={this.state.value}>
        <Toolbar />
      </MyContext.Provider>
    )
  }
}
```
