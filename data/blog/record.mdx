---
title: 'Java 14ì˜ record'
date: '2023-11-25'
tags: ['Backend']
draft: false
summary: 'Recordë¥¼ ì•Œì•„ë³´ì'
images: []
---

ğŸ¦¡ ì‘ì„±ì : ì›ì¤€

### Oracleì˜ Java14 ê³µì‹ ë¬¸ì„œë¥¼ í™•ì¸í•˜ë©´ ë‹¤ìŒê³¼ ê°™ì´ ë‚˜ì™€ìˆë‹¤.

(Java16 ë¶€í„° ì •ì‹ ì¶œì‹œ ëë‹¤ê³  í•œë‹¤.)

```java
final class Rectangle implements Shape {
    final double length;
    final double width;

    public Rectangle(double length, double width) {
        this.length = length;
        this.width = width;
    }

    double length() { return length; }
    double width() { return width; }
}
```

ë‹¤ìŒê³¼ ê°™ì€ íŠ¹ì§•ì´ ìˆìŠµë‹ˆë‹¤.

- ëª¨ë“  íšŒì›ì´ ìµœì¢… ì„ ì–¸ë©ë‹ˆë‹¤.
- ìœ ì¼í•œ ë©”ì†Œë“œëŠ” ìƒì„±ìÂ 
  `Rectangle(double length, double width)length()width()`
  ì™€ ë‘ ê°œì˜ ì ‘ê·¼ìë¡œ êµ¬ì„±ë©ë‹ˆë‹¤

ì´ í´ë˜ìŠ¤ë¥¼ ë ˆì½”ë“œë¡œ ë‚˜íƒ€ë‚¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```java
record Rectangle(float length, float width) { }
```

ì´ë ‡ê²Œ ì‘ì„±ë˜ì–´ ìˆë‹¤.

---

## ê·¸ë ‡ë‹¤ë©´ Java 14ë¶€í„° ìƒê¸´ recordëŠ” ë¬´ì—‡ì¼ê¹Œ?

ê¸°ì¡´ì˜ ìš°ë¦¬ëŠ” ë°ì´í„°ë² ì´ìŠ¤ ê²°ê³¼, ì¿¼ë¦¬ ê²°ê³¼, ì„œë¹„ìŠ¤ ì •ë³´ ë“±ì˜ ë°ì´í„°ë¥¼ ê°„ë‹¨íˆ ë³´ê´€í•˜ê¸° ìœ„í•´ í´ë˜ìŠ¤ë¥¼ ì‘ì„±í–ˆì—ˆë‹¤.

ê·¸ë¦¬ê³  ì´ ê²½ìš° ë°ì´í„°ëŠ” ë¶ˆë³€ì„±ì˜ íŠ¹ì§•ì„ ê°€ì§€ë„ë¡ êµ¬í˜„í–ˆë‹¤.

ì´ë¥¼ ìœ„í•´ì„œ ë‹¤ìŒê³¼ ê°™ì€ ì¡°ê±´ì„ ì‚¬ìš©í–ˆì„ ê²ƒì´ë‹¤.

1. ê° ë°ì´í„° ì¡°ê°ì— ëŒ€í•œ `private`, `final` í•„ë“œ
2. ê° í•„ë“œì— ëŒ€í•œ `getter`
3. ê° í•„ë“œì— í•´ë‹¹ ì¸ìˆ˜ê°€ ìˆëŠ” ìƒì„±ì
4. ë¹Œë” ë“±ë“±

```java
@Getter
@AllArgsConstructor
@Builder
public class SignUp {
    private final String name;
		private final String address;
}
```

ì˜ˆë¥¼ ë“¤ì–´ ìœ„ì™€ ê°™ì´ ì‘ì„±í–ˆì„ ê²ƒì´ë‹¤.

í•˜ì§€ë§Œ, ì´ ê²½ìš° ë‘ê°€ì§€ ë¬¸ì œê°€ ìˆë‹¤.

1. boilerplate codeê°€ ë§ì´ ìˆë‹¤.

   ê° ë°ì´í„° í´ë˜ìŠ¤ì— ëŒ€í•´ ë™ì¼í•˜ê³  ì§€ë£¨í•œ ê³¼ì •ì„ ë°˜ë³µí•´ì•¼ í•œë‹¤.

   ex) ìƒì„±ìë¥¼ ë§Œë“¤ê³ , getterë¥¼ ë§Œë“¤ê³ â€¦ (ë¬¼ë¡ , ì´ë¥¼ ìœ„í•´ ë¡¬ë³µì„ ì‚¬ìš©í•˜ì§€ë§Œ)

2. ìš°ë¦¬ì˜ í´ë˜ìŠ¤ ëª©ì ì„ ëª¨í˜¸í•˜ê²Œ í•œë‹¤.

   í´ë˜ìŠ¤ê°€ ë‹¨ìˆœíˆ ì´ë¦„ê³¼ ì£¼ì†Œë¼ëŠ” ë‘ê°œì˜ String í•„ë“œê°€ ìˆëŠ” ë°ì´í„° í´ë˜ìŠ¤ë¼ëŠ” ì‚¬ì‹¤ì´ ëª¨í˜¸í•´ì§„ë‹¤.

ì´ë•Œ ë” ë‚˜ì€ ì ‘ê·¼ ë°©ì‹ì€ í´ë˜ìŠ¤ê°€ ë°ì´í„° í´ë˜ìŠ¤ì„ì„ ëª…ì‹œì ìœ¼ë¡œ ì„ ì–¸í•˜ëŠ” ê²ƒì´ë‹¤.

ìš°ë¦¬ëŠ” ì´ë¥¼ ìœ„í•´ì„œ ë°˜ë³µì ì¸ ë°ì´í„° í´ë˜ìŠ¤ë¥¼ recordë¡œ ëŒ€ì²´í•  ìˆ˜ ìˆë‹¤.

> record ëŠ” í•„ë“œì˜ ìœ í˜•ê³¼ ì´ë¦„ë§Œ í•„ìš”í•œ ë¶ˆë³€ ë°ì´í„° í´ë˜ìŠ¤ì´ë‹¤.
> EqualsÂ ,Â Â *hashCode*Â ë°Â *toString*Â ë©”ì†Œë“œì™€Â *private,Â final*Â í•„ë“œ ë°Â *publicÂ ìƒì„±ì*Â ëŠ” Java ì»´íŒŒì¼ëŸ¬ì— ì˜í•´ ìƒì„±ë©ë‹ˆë‹¤.

ì´ì œ, ìš°ë¦¬ëŠ” ìœ„ì˜ ì½”ë“œë¥¼

```java
public record Person (String name, String address) {}
```

ì´ë ‡ê²Œ ë‚˜íƒ€ë‚¼ ìˆ˜ ìˆë‹¤.

### public ìƒì„±ì ì œê³µ

ì´ì œ ê° í•„ë“œì— ëŒ€í•œ ì¸ìˆ˜ê°€ í¬í•¨ëœ public ìƒì„±ìê°€ ìë™ìœ¼ë¡œ ìƒì„±ëœë‹¤.

```java
public Person(String name, String address) {
    this.name = name;
    this.address = address;
}
```

ë”°ë¼ì„œ ìš°ë¦¬ëŠ” í´ë˜ìŠ¤ì™€ ë™ì¼í•œ ë°©ì‹ìœ¼ë¡œ ê°ì²´ë¥¼ ì¸ìŠ¤í„´ìŠ¤í™” í•  ìˆ˜ ìˆë‹¤.

```java
Person person = new Person("John Doe", "100 Linda Ln.");
```

### getter ì œê³µ

ì´ì— ëŒ€í•œ ì‚¬ìš©ë²•ì€ ë‹¤ìŒê³¼ ê°™ë‹¤.

```java
@Test
public void givenValidNameAndAddress_whenGetNameAndAddress_thenExpectedValuesReturned() {
    String name = "John Doe";
    String address = "100 Linda Ln.";

    Person person = new Person(name, address);

    assertEquals(name, person.name());
    assertEquals(address, person.address());
}
```

ì¦‰, `ê°ì²´.í•„ë“œ()` ì´ë ‡ê²Œ ì‚¬ìš©í•˜ë©´ ëœë‹¤.

### equals() ì œê³µ

```java
@Test
public void givenSameNameAndAddress_whenEquals_thenPersonsEqual() {
    String name = "John Doe";
    String address = "100 Linda Ln.";

    Person person1 = new Person(name, address);
    Person person2 = new Person(name, address);

    assertTrue(person1.equals(person2));
}
```

ì´ëŠ” true/falseë¥¼ ë°˜í™˜í•œë‹¤.

### ì»¤ìŠ¤í…€ ìƒì„±ì êµ¬í˜„

```java
public record Person(String name, String address) {
    public Person {
        Objects.requireNonNull(name);
        Objects.requireNonNull(address);
    }
}
// null ì—¬ë¶€ í™•ì¸í•  ìˆ˜ ìˆë„ë¡ êµ¬í˜„

public record Person(String name, String address) {
    public Person(String name) {
        this(name, "Unknown");
    }
}
// addressì—ëŠ” "Unknown" ë„£ë„ë¡ êµ¬í˜„
```

ê¸°ì¡´ì˜ í´ë˜ìŠ¤ì—ì„œì˜ ë°©ì‹ê³¼ ë§ˆì°¬ê°€ì§€ë¡œ êµ¬í˜„í•  ìˆ˜ ìˆë‹¤.

ë‹¤ë§Œ, ì»´íŒ©íŠ¸ ìƒì„±ì(ë§¤ê°œë³€ìˆ˜ë¥¼ ë°›ëŠ” ë¶€ë¶„ì´ ì‚¬ë¼ì§„ í˜•íƒœ)ì™€ ê°™ì€ ë§¤ê°œë³€ìˆ˜ë¥¼ ë°›ëŠ” ìƒì„±ìë¥¼ ìƒì„±í•˜ëŠ” ê²½ìš° ì»´íŒŒì¼ ì—ëŸ¬ê°€ ë°œìƒí•˜ê²Œ ëœë‹¤.

> **ì»´íŒ©íŠ¸ ìƒì„±ì : ë§¤ê°œë³€ìˆ˜ë¥¼ ë°›ëŠ” ë¶€ë¶„ì´ ì‚¬ë¼ì§„ í˜•íƒœì˜ ìƒì„±ìë¡œ, ë‚´ë¶€ì—ì„œ ì¸ìŠ¤í„´ìŠ¤ í•„ë“œì— ì ‘ê·¼í•  ìˆ˜ ì—†ê³  validateë¥¼ ìˆ˜í–‰í•˜ëŠ” ìš©ë„ë¡œ ì ë‹¹í•˜ë‹¤.**

```java
public record Person(String name, String address) {
    public Person {
        Objects.requireNonNull(name);
        Objects.requireNonNull(address);
    }

    public Person(String name, String address) {
        this.name = name;
        this.address = address;
    }
}
```

ì´ì™€ ê°™ì´ name, addressë¥¼ ë°›ëŠ” ìƒì„±ìë¥¼ ë§Œë“¤ê²Œ ë˜ë©´ ì»´íŒ©íŠ¸ ìƒì„±ìì™€ ë™ì¼í•œ ë§¤ê°œë³€ìˆ˜ë¥¼ ë°›ê¸° ë•Œë¬¸ì— ì»´íŒŒì¼ì—ì„œ ì—ëŸ¬ê°€ ë°œìƒí•˜ê²Œ ëœë‹¤.

### static ë³€ìˆ˜ ë° ë©”ì†Œë“œ

ì¼ë°˜ Javaì˜ í´ë˜ìŠ¤ì™€ ë§ˆì°¬ê°€ì§€ë¡œ recordì—ë„ static ë³€ìˆ˜ì™€ ë©”ì†Œë“œë¥¼ ìƒì„±í•  ìˆ˜ ìˆë‹¤.

```java
public record Person(String name, String address) {
    public static String UNKNOWN_ADDRESS = "Unknown";
}
// static ë³€ìˆ˜ ìƒì„±

public record Person(String name, String address) {
    public static Person unnamed(String address) {
        return new Person("Unnamed", address);
    }
}
//static ë©”ì†Œë“œ ìƒì„±
```

```java
Person.UNKNOWN_ADDRESS
Person.unnamed("100 Linda Ln.");
```

ì´ëŸ°ì‹ìœ¼ë¡œ record ì´ë¦„ìœ¼ë¡œ static ë³€ìˆ˜ í˜¹ì€ ë©”ì†Œë“œë¥¼ ììœ ë¡­ê²Œ ì°¸ì¡°í•  ìˆ˜ ìˆë‹¤.

---

â†’ ë‹¤ìŒí¸ì— ì´ì–´ì„œ ì‘ì„±â€¦
